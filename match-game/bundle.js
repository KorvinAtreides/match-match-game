(()=>{"use strict";var e,t,r={400:()=>{const e=50,t=1050,r=1200,n=2050,a="matchDB",s=10;function o(e){let t=0,r=0;for(let n=e.length-1;n>=0;n-=1)r+=Math.pow(2,t)*Number(e[n]),t+=1;return r}function i(e){let t,r=e.toString(2),n=1;return"-"===r[0]&&(n=-1,r=r.slice(1)),r.length<32?t=o(r):(r=r.slice(r.length-32),"0"===r[0]?t=o(r):(r=r.slice(1),t=Math.pow(2,32)/-2+o(r))),t*n}class c{constructor(e,t,r,n){this.firstName=e,this.lastName=t,this.email=r,this.avatar=n,this.hash=c.hashCode(e,t,r)}static hashCode(e,t,r){let n=0;const a=(e+t+r).toLowerCase();for(let e=0;e<a.length;e+=1){const t=a.charCodeAt(e);n=n*Math.pow(2,5)-n+t,n=i(n)}return n}}function l(e){return t=this,r=void 0,a=function*(){const t=new Image;t.setAttribute("crossOrigin","anonymous");const r=document.createElement("canvas");return t.src=e,new Promise((e=>{t.onload=function(){r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0,t.width,t.height);const n=r.toDataURL();e(n)}}))},new((n=void 0)||(n=Promise))((function(e,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,i)}c((a=a.apply(t,r||[])).next())}));var t,r,n,a}const d=[{firstName:"Nicci",lastName:"Troiani",email:"nicci.ticky@gmail.com",avatarUrl:"https://sun9-63.userapi.com/impg/utWq9zhXmW7kjw329id4ClHNuEfk0AGARvGA9Q/FPh4fmEBktk.jpg?size=130x130&quality=96&sign=1ee93a79eedb6a799601edcda8ae3bff&type=album",score:"4840"},{firstName:"Jane",lastName:"Doe",email:"jane.doe@aol.com",avatarUrl:"https://sun9-48.userapi.com/impg/AfZi-DLeq6qEN_9ZTB2G3JttLVv3gBODwGG9Ow/pCY0X9FShoM.jpg?size=130x129&quality=96&sign=f9af1900d093a8e836848fcc93c58223&type=album",score:"8480"},{firstName:"Katrin",lastName:"Shwalts",email:"katty.cat@yahoo.com",avatarUrl:"https://sun9-7.userapi.com/impg/9oX-jpjbxow7IEth-_Ea5ThhdcF3g9_B-Tf_kA/Y69Orb0o5jE.jpg?size=107x130&quality=96&sign=41147675013a23d99567581509970f5c&type=album",score:"10800"},{firstName:"Ann",lastName:"Semlani",email:"anny.sem@fit.lv",avatarUrl:"https://sun9-19.userapi.com/impg/B5xZAlqG8-7CE-dlWnbWOG08E-SRRfzKUjr81w/NDAuVJKfigQ.jpg?size=130x106&quality=96&sign=9f4c80526593bd3900a2f154d4de23c3&type=album",score:"2400"},{firstName:"Ilon",lastName:"Mask",email:"spacex.program@gmail.com",avatarUrl:"https://sun9-14.userapi.com/impg/_il5AL2dXSUk2-5WaHKR3N-3U6ExBokOKtYPoA/B0Qoz4mV-i4.jpg?size=604x402&quality=96&sign=86c0b4b5d7debe8ea28f27c747b24eb9&type=album",score:"12200"},{firstName:"Leonardo",lastName:"DiCaprio",email:"lyonya.di@gmail.com",avatarUrl:"https://avatars.mds.yandex.net/get-zen_doc/3472554/pub_5ffb67a1d1a90641cab5ceaf_5ffb6915d1a90641cab7ed41/scale_1200",score:"10140"},{firstName:"Harold",lastName:"Hide The Pain",email:"harold.pain@gmail.com",avatarUrl:"https://sun9-59.userapi.com/impg/ju_qnC7Akr2OzIzEd5DyL_3Mi-hJ5_nBJwuUjg/5c4lNcqPqn8.jpg?size=604x423&quality=96&sign=182605047f3691bc45ef3257344926e1&type=album",score:"840"},{firstName:"Korvin",lastName:"Atreides",email:"admin.admin@tut.by",avatarUrl:"https://sun9-75.userapi.com/impg/5oyj-ODPMHqiJansxdYX2la7rqwffquDkB6hYA/uKhKzErrR4A.jpg?size=304x273&quality=96&sign=dcafe8ccd74d75a70d3ef3453292e10b&type=album",score:"16600"},{firstName:"All",lastName:"Is Fine",email:"awesome.life@yandex.ru",avatarUrl:"https://sun9-59.userapi.com/impg/Il3nx_ZmO4TFrffCLeLpETfN7Lfzev4W9z33Hw/xWN7Wivxjto.jpg?size=768x514&quality=96&sign=33f064608770dc1a0f4fa6dd8bd72e1b&type=album",score:"1640"},{firstName:"Student1",lastName:"BadWork",email:"student1@mail.ru",avatarUrl:"https://sun9-65.userapi.com/impg/EfaXym2fV8Bllbu_JPdnwZ4QVOThDtcMjAiUOQ/4t-GzmVfFxU.jpg?size=1280x850&quality=96&sign=0872f000ef1e1fd46c7404390d1325a5&type=album",score:"0"}];var u=function(e,t,r,n){return new(r||(r=Promise))((function(a,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,i)}c((n=n.apply(e,t||[])).next())}))};class p{add(e,t,r){return u(this,void 0,void 0,(function*(){const n=(yield this.openRequestToDB()).transaction([`${t}`],"readwrite").objectStore(`${t}`);let a;if("games"===t){const t={firstName:e.firstName,lastName:e.lastName,email:e.email,avatarUrl:e.avatar,score:r};a=n.put(t)}else a=n.put(e);a.onerror=()=>{throw this.status="error",new Error(`'Error: ${a.error.name}`)},a.onsuccess=()=>{this.status="success"}}))}createDB(){return u(this,void 0,void 0,(function*(){if(!("indexedDB"in window)||/iPad|iPhone|iPod/.test(navigator.platform))throw new Error("Error: Your device doesn't support IndexedBD");const e=yield this.openRequestToDB(),t=e.objectStoreNames.contains("users"),r=e.objectStoreNames.contains("games");t||r||(e.createObjectStore("users",{keyPath:"hash"}),e.createObjectStore("games",{keyPath:"id",autoIncrement:!0}),this.createDefaultDB())}))}getMatchesDB(){return u(this,void 0,void 0,(function*(){const e=yield this.openRequestToDB();return new Promise((t=>{const r=[],n=e.transaction(["games"],"readonly"),a=n.objectStore("games").openCursor();a.onsuccess=function(){const e=a.result;e&&(r.push(e.value),e.continue())},n.oncomplete=()=>{this.status="success",t(r)}}))}))}createDefaultDB(){return u(this,void 0,void 0,(function*(){d.forEach((e=>u(this,void 0,void 0,(function*(){const t=yield l(e.avatarUrl),r=new c(e.firstName,e.lastName,e.email,t);this.add(r,"users"),this.add(r,"games",e.score)}))))}))}checkUser(e){return u(this,void 0,void 0,(function*(){const t=yield this.openRequestToDB();return new Promise(((r,n)=>{const a=t.transaction(["users"],"readonly").objectStore("users").get(e);a.onsuccess=()=>{this.status="success",r(a.result)},a.onerror=e=>{this.status="error",n(new Error(`'Error: ${e}`))}}))}))}openRequestToDB(){return new Promise(((e,t)=>{const r=indexedDB.open(a);let n;this.status="pending",r.onupgradeneeded=()=>{n=r.result,e(n)},r.onsuccess=()=>{n=r.result,e(n)},r.onerror=e=>{this.status="error",t(new Error(`'Error: ${e}`))}}))}}class m{appendNewElement(e=document.body,t="div",r){this.elementIsReady=!1;const n=document.createElement(t);return r&&n.classList.add(r),e.append(n),this.elementIsReady=!0,n}}class h{static setDefault(e,t){this.settings={type:e,difficulty:t}}}class f{constructor(e,t,r,n){this.x=t,this.y=r,this.value=n,this.context=e,this.reverse=!0,this.stopped=!1}tick(){this.value||(this.reverse=!1);let e=this.reverse?-1:1;e=this.stopped?0:e,this.value+=e,this.render()}render(){const e=new Date(1e3*this.value),[t]=[this.context];t.font="bold 50px serif",t.fillStyle="#000",t.fillText(`${e.getUTCMinutes()<10?"0":""}${e.getUTCMinutes()}:${e.getSeconds()<10?"0":""}${e.getUTCSeconds()}`,this.x,this.y)}}class g{constructor(){this.waitingBeforeGame=30,this.waitingAnimation=.5,this.clickedTargets=0,this.countMatches=0,this.countWrongMatches=0,this.firstTarget=null}startGame(){g.gameIsCreated=!1,document.querySelector("main").remove();const e=document.querySelector(".header--button");e.textContent="Stop Game",e.onclick=()=>{document.querySelector(".header--li").click()},document.querySelectorAll(".header--li").forEach((e=>e.classList.remove("active"))),this.targetsLeft=Number(h.settings.difficulty),this.createField(h.settings.type,Number(h.settings.difficulty))}createField(e,t){const r=new m,n=r.appendNewElement(document.body,"main","game--wrapper"),a=document.createElement("canvas");a.classList.add("game--timer"),n.append(a);const s=r.appendNewElement(n,"div","game--field-wrapper");s.style.setProperty("grid-template-columns",`repeat( ${Math.pow(t,.5)}, 100px)`);const o=t/2,i=[];for(let e=0;e<t;e+=1)i.push(r.appendNewElement(s,"div","item-wrapper"));const c=function(e){const t=e;for(let e=t.length-1;e>0;e-=1){const r=Math.floor(Math.random()*(e+1)),n=t[r];t[r]=t[e],t[e]=n}return t}(function(e){const t=[];for(let r=1;r<e+1;r+=1)t.push(r),t.push(r);return t}(o));g.displayCards(i,c,e),g.gameIsCreated=!0;const l=this.setTimer(a);this.timer=l,this.beforeGame(i),i.forEach((e=>{e.querySelector(".game--image-wrapper").addEventListener("click",(()=>{this.clickInGame(e,l.value)}))}))}static displayCards(e,t,r){for(let n=0;n<e.length;n+=1){const a=new m,s=e[n],o=a.appendNewElement(s,"div","game--image-wrapper");s.setAttribute("data-number",`${t[n]}`);const i=a.appendNewElement(o,"img","item-img");i.setAttribute("src","./img/item-back.png"),i.classList.add("item-back"),i.style.setProperty("transform","rotateY(180deg)");const c=a.appendNewElement(o,"img","item-img");c.setAttribute("src",`./img/game-items/${r}/${t[n]<10?"0":""}${t[n]}.png`),c.classList.add("item-card"),c.style.setProperty("transform","rotateY(0deg)"),o.addEventListener("click",(()=>{g.rotateCards(o,!0)}))}}setTimer(e){const t=e.getContext("2d"),r=new f(t,90,90,this.waitingBeforeGame);return setInterval((()=>{t.fillStyle="#fff",t.fillRect(0,0,e.width,e.height),r.tick()}),1e3),r}beforeGame(e){e.forEach((e=>{const t=(new m).appendNewElement(e,"div","shield");setTimeout((()=>{t.remove();const r=e.querySelector(".game--image-wrapper");g.rotateCards(r,!0)}),1e3*(this.waitingBeforeGame+1))}))}clickInGame(e,t){const r=(new m).appendNewElement(e,"div","shield");if(this.clickedTargets+=1,2===this.clickedTargets){this.turnOnShields(e);const n=this.firstTarget.querySelector(".shield"),a=this.firstTarget.dataset.number===e.dataset.number;r.style.setProperty("background-color",a?"green":"red"),n.style.setProperty("background-color",a?"green":"red"),this.countMatches+=1,a?(this.targetsLeft-=2,0===this.targetsLeft&&this.endGame(t)):(this.countWrongMatches+=1,setTimeout((()=>{g.rotateCards(e,!1),g.rotateCards(this.firstTarget,!1)}),1e3*this.waitingAnimation),setTimeout((()=>{r.remove(),n.remove(),r.style.setProperty("background-color","transparent"),n.style.setProperty("background-color","transparent")}),2*this.waitingAnimation*1e3)),setTimeout((()=>{this.clickedTargets=0,this.firstTarget=null}),1e3*this.waitingAnimation)}else this.firstTarget=e}turnOnShields(e){const t=document.querySelectorAll(".item-wrapper"),r=new m;t.forEach((t=>{if(t!==e&&t!==this.firstTarget){const e=r.appendNewElement(t,"div","shield");setTimeout((()=>{e.remove()}),2*this.waitingAnimation*1e3)}}))}static rotateCards(e,t){const r=t?180:-180,n=e.querySelector(".item-back"),a=e.querySelector(".item-card");let s=Number(n.style.transform.slice(8,-4));n.style.setProperty("transform",`rotateY(${s+r}deg)`),s=Number(a.style.transform.slice(8,-4)),a.style.setProperty("transform",`rotateY(${s+r}deg)`)}endGame(e){this.timer.stopped=!0;const t=this.countMatches-this.countWrongMatches;let r=(100*t-10*e)*Math.pow(2*t,.5);r=r<0?0:r,this.score=r;const n={allCards:2*t,allMatches:this.countMatches,wrongMatches:this.countWrongMatches,time:e,userScore:r};this.updateUser(),this.statistic=n,this.showCongratulations()}updateUser(){const e=c.currentUser;(new p).add(e,"games",String(this.score))}showCongratulations(){const r=this.statistic,n=new m,a=n.appendNewElement(document.body,"aside","aside-wrapper");a.classList.add("invisible"),n.appendNewElement(a,"div","congrats--back");const s=n.appendNewElement(a,"form","congrats--front");s.style.transform="scale(0.3)",n.appendNewElement(s,"h2","congrats--title").textContent="Congratulations!!!",n.appendNewElement(s,"h2","congrats--subtitle").textContent="Some Statistics:",n.appendNewElement(s,"ul","congrats--stat-wrapper").innerHTML=`\n      <li>Your Name: <span>${c.currentUser.firstName} ${c.currentUser.lastName}</span></li>\n      <li>All Cards: <span>${r.allCards}</span></li>\n      <li>All Matches: <span>${r.allMatches}</span></li>\n      <li>Wrong Matches: <span>${r.wrongMatches}</span></li>\n      <li>Time: <span>${r.time} seconds</span></li>\n      <li>Your Score: <span>${r.userScore}</span></li>\n    `;const o=n.appendNewElement(s,"button","congrats--button");o.setAttribute("type","button"),o.textContent="OK",a.classList.remove("invisible"),document.body.classList.add("notScrollable"),setTimeout((()=>{s.style.transform="scale(1)"}),e),o.onclick=()=>{s.style.transform="scale(0.3)",setTimeout((()=>{a.classList.add("invisible"),document.querySelector("body").classList.remove("notScrollable"),a.remove(),document.querySelectorAll(".header--li")[1].click()}),t)}}}function v(e,t){const r=e.nextElementSibling;r.classList.remove("invisible"),r.setAttribute("src",`./icons/validation-${t?"yes":"not"}.png`)}class w{constructor(){this.validity=!1,this.specialSymbols=["~","!","@","#","$","%","*","(",")","_","â€”","+","=","|",":",";",'"',"'","`","<",">",",",".","?","/","^"],this.components=[],this.newUser=!0}createForm(){const e=new m,t=e.appendNewElement(document.body,"aside","aside-wrapper");t.classList.add("invisible"),e.appendNewElement(t,"div","form-back"),this.formItself=e.appendNewElement(t,"form","user-form"),this.formItself.style.transform="scale(0.3)",e.appendNewElement(this.formItself,"h3","user-form--title").textContent="Register new Player";const r=e.appendNewElement(this.formItself,"div","user-form--input-wrapper"),n=e.appendNewElement(this.formItself,"div","user-form--avatar-wrapper");e.appendNewElement(n,"img","user-form--avatar").setAttribute("src","./icons/empty-face.png");const a=document.createElement("input");a.classList.add("user-form--avatar-input"),a.setAttribute("type","file"),a.setAttribute("title","Load picture"),n.append(a),a.addEventListener("input",(()=>{w.createAvatar(a)}));const s=e.appendNewElement(r,"label","user-form--label");s.textContent="First Name:";const o=e.appendNewElement(s,"input","user-form--input"),i=e.appendNewElement(r,"label","user-form--label");i.textContent="Last Name:";const c=e.appendNewElement(i,"input","user-form--input"),l=e.appendNewElement(r,"label","user-form--label");l.textContent="Email:";const d=e.appendNewElement(l,"input","user-form--input");d.setAttribute("data-type","email"),[o,c,d].forEach((e=>{this.components.push(e)})),this.setValidation(),[s,i,l].forEach((t=>{const r=e.appendNewElement(t,"img","user-form--validation-img");r.setAttribute("src","./icons/validation-not.png"),r.classList.add("invisible")}));const u=e.appendNewElement(this.formItself,"div","user-form--button-wrapper"),p=e.appendNewElement(u,"button","user-form--button");p.textContent="To Log in";const h=e.appendNewElement(u,"button","user-form--button");h.textContent="Add user";const f=e.appendNewElement(u,"button","user-form--button");f.textContent="Cancel",[p,h,f].forEach((e=>{e.setAttribute("type","button")})),p.addEventListener("click",(()=>{this.newUser=!this.newUser,this.changeFormType()})),h.addEventListener("click",(()=>{this.validity=this.validateForm(),this.validity&&this.submitForm()})),h.addEventListener("mouseenter",(()=>{this.validity=this.validateForm(),function(e,t){t?(e.classList.remove("invalid"),e.removeAttribute("title")):(e.classList.add("invalid"),e.setAttribute("title","Please, enter the valid data."))}(h,this.validity)})),f.addEventListener("click",(()=>{this.hideForm()})),this.showForm()}changeFormType(){const e=document.querySelectorAll(".user-form--button"),t=document.querySelector(".user-form--title");this.newUser?(e[0].textContent="To Log in",e[1].textContent="Add user",t.textContent="Register new Player",this.formItself.classList.remove("log-in")):(e[0].textContent="To Register",e[1].textContent="Log In",t.textContent="Authorization",this.formItself.classList.add("log-in"))}showForm(){const t=document.querySelector(".aside-wrapper");this.formItself.style.transform="scale(0.3)",t.classList.remove("invisible"),document.body.classList.add("notScrollable"),setTimeout((()=>{this.formItself.style.transform="scale(1)"}),e)}hideForm(){const e=document.querySelector(".aside-wrapper");this.formItself.style.transform="scale(0.3)",setTimeout((()=>{e.classList.add("invisible"),document.querySelector("body").classList.remove("notScrollable"),this.clearForm()}),t)}setValidation(){this.components.forEach((e=>{let t;e.setAttribute("required","required"),"email"!==e.dataset.type?(t=/\p{L}+([0-9 ]{0,}\p{L}{0,})*$/,e.setAttribute("data-type","name")):t=new RegExp(`${/^(([^<>()[\].,;:\s@"]+(.[^<>()[\].,;:\s@"]+))|(".+"))/.source}${/@(([0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3})|(([a-zA-Z-0-9]+.)+[a-zA-Z]{2,}))$/.source}`),e.setAttribute("data-regexp",t.toString().slice(1,-1)),e.setAttribute("maxlength","30"),e.addEventListener("input",(()=>v(e,this.validateInput(e))))}))}validateForm(){let e=0;return this.components.forEach((t=>{e+=1-Number(this.validateInput(t)),v(t,this.validateInput(t))})),!e}validateInput(e){const t=this.specialSymbols;if("name"===e.dataset.type&&(e.removeAttribute("title"),!t.every((t=>!e.value.includes(t)))))return e.setAttribute("title","Name should not includes special symbols"),!1;const r=new RegExp(e.dataset.regexp,"ugi");return r.lastIndex=0,e.validity.valid&&r.test(e.value)}clearForm(){this.components.forEach((e=>{e.value="",e.nextElementSibling.classList.add("invisible")})),document.querySelector(".user-form--avatar").setAttribute("src","./icons/empty-face.png")}static createAvatar(e){const t=e.files[0],r=new FileReader;r.onload=function(){const e=new Image;e.setAttribute("src",String(r.result));const t=document.querySelector(".user-form--avatar");t.classList.remove("user-form--avatar"),t.replaceWith(e),e.classList.add("user-form--avatar")},r.readAsDataURL(t),e.value=""}submitForm(){return e=this,t=void 0,n=function*(){const e=[];this.components.forEach((t=>e.push(t.value)));const t=document.querySelector(".user-form--avatar"),r=yield l(t.src),n=new c(e[0],e[1],e[2],r),a=new p,s=yield a.checkUser(n.hash);if(this.newUser){if(s)return void this.errorForm("This user already exists!!");a.add(n,"users")}else{if(!s)return void this.errorForm("Wrong Name or Email!!");n.avatar=s.avatar}this.deleteForm(),c.currentUser=n,w.displayCurrentUser()},new((r=void 0)||(r=Promise))((function(a,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,i)}c((n=n.apply(e,t||[])).next())}));var e,t,r,n}errorForm(e){this.hideForm(),setTimeout((()=>{this.showForm(),document.querySelector(".user-form--title").innerHTML=e}),r)}deleteForm(){this.hideForm(),setTimeout((()=>{document.querySelector(".aside-wrapper").remove()}),n)}static displayCurrentUser(){const e=document.querySelector(".header--button");e.textContent="Start Game",e.onclick=()=>{(new g).startGame()};const t=new m,r=document.querySelector("header"),n=t.appendNewElement(r,"div","header--avatar");n.style.setProperty("background-image",`url(${c.currentUser.avatar})`),e.after(n),t.appendNewElement(r,"div","header--wrapper-avatar").append(e,n)}}class y{constructor(){this.components=[]}createProject(){this.createHeader(),document.querySelector(".header--ul").children[0].classList.add("active"),this.createAboutGamePage(),this.createSettingsPage(),(new p).createDB(),this.createScorePage()}createHeader(){const e=new m,t=e.appendNewElement(document.body,"header","header");e.appendNewElement(t,"img","logo").setAttribute("src","./icons/logo.png");const r=e.appendNewElement(t,"ul","header--ul"),n=[];for(let t=0;t<3;t+=1)n.push(e.appendNewElement(r,"li","header--li"));for(let t=0;t<n.length;t+=1){const r=n[t],a=e.appendNewElement(r,"img","header--img");switch(t){case 0:a.setAttribute("src","./icons/header-about.png"),r.innerHTML=`${a.outerHTML} About Game`,r.addEventListener("click",(()=>{const e=this.components.find((e=>"about-game--wrapper"===e.className));this.showPage(e,r)}));break;case 1:a.setAttribute("src","./icons/header-score.png"),r.innerHTML=`${a.outerHTML} Best Score`,r.addEventListener("click",(()=>{const e=this.components.find((e=>"score--wrapper"===e.className));this.showPage(e,r),y.showScore()}));break;case 2:a.setAttribute("src","./icons/header-settings.png"),r.innerHTML=`${a.outerHTML} Game Settings`,r.addEventListener("click",(()=>{const e=this.components.find((e=>"settings--wrapper"===e.className));this.showPage(e,r)}))}}const a=e.appendNewElement(t,"button","header--button");a.textContent="register new player";const s=new w;a.onclick=()=>{document.querySelector(".aside-wrapper")?s.showForm():s.createForm()}}createAboutGamePage(){const e=new m,t=e.appendNewElement(document.body,"main","about-game--wrapper");e.appendNewElement(t,"h2","about-game--title").textContent="How to play?";const r=[];for(let n=0;n<3;n+=1)r.push(e.appendNewElement(t,"div","about-game--rule-wrapper"));for(let t=0;t<r.length;t+=1){const n=e.appendNewElement(r[t],"div","about-game--rule"),a=e.appendNewElement(r[t],"div","about-game--rule");a.classList.add("example");const s=e.appendNewElement(n,"p","about-game--text"),o=e.appendNewElement(a,"img","rule--img");switch(t){case 0:s.textContent="1) Register as new player in game",o.setAttribute("src","./img/example-form.png");break;case 1:s.textContent="2) Configure your game settings",o.setAttribute("src","./img/example-settings.png");break;case 2:s.innerHTML="\n            3) Start new game! \n            <br>\n            <br>\n            Remember card positions and match it before times up.\n          ",o.setAttribute("src","./img/example-game.png")}}this.components.push(t)}createSettingsPage(){const e=new m,t=e.appendNewElement(document.body,"main","settings--wrapper");t.remove(),e.appendNewElement(t,"h2","settings--title").textContent="Settings:",e.appendNewElement(t,"h4","settings--subtitle").textContent="Game Cards";const r=document.createElement("select");r.classList.add("settings--select"),r.innerHTML='  \n      <option value="Signs" disabled selected>Select game card type</option>\n      <option value="Birds">Birds</option>\n      <option value="Dogs">Dogs</option>\n      <option value="Airplanes">Airplanes</option>\n      <option value="Signs">Traffic Signs</option>\n    ',t.append(r),e.appendNewElement(t,"h4","settings--subtitle").textContent="Difficulty";const n=document.createElement("select");n.classList.add("settings--select"),n.innerHTML='  \n      <option value="36" disabled selected>Select Difficulty</option>\n      <option value="16">4x4</option>\n      <option value="36">6x6</option>\n      <option value="64">8x8</option>\n    ',t.append(n),h.setDefault(r.value,n.value),[r,n].forEach((e=>{e.addEventListener("input",(()=>{h.settings.type=r.value,h.settings.difficulty=n.value}))})),this.components.push(t)}showPage(e,t){if(this.components.forEach((e=>e.remove())),g.gameIsCreated){const e=document.querySelector(".header--button");e.textContent="Start Game",document.querySelector(".game--wrapper").remove(),g.gameIsCreated=!1,e.onclick=()=>{(new g).startGame()}}document.querySelector("header").after(e),document.querySelectorAll(".header--li").forEach((e=>e.classList.remove("active"))),t.classList.add("active")}createScorePage(){const e=new m,t=e.appendNewElement(document.body,"main","score--wrapper");t.remove(),e.appendNewElement(t,"h2","score--title").textContent=`Best ${s} Players: `,e.appendNewElement(t,"ul","score--ul"),this.components.push(t)}static showScore(){return e=this,t=void 0,n=function*(){const e=new m,t=new p,r=yield t.getMatchesDB();r.sort(((e,t)=>Number(e.score)-Number(t.score))).reverse();const n=document.querySelector(".score--ul");n.innerHTML="",r.slice(0,s).forEach((t=>{const r=e.appendNewElement(n,"li","score--li"),a=e.appendNewElement(r,"div","score--info-wrapper");e.appendNewElement(a,"div","score--avatar").style.setProperty("background-image",`url(${t.avatarUrl})`);const s=e.appendNewElement(a,"div","score--p-wrapper");e.appendNewElement(s,"div","score--name").textContent=`${t.firstName} ${t.lastName}`,e.appendNewElement(s,"div","score--email").textContent=`${t.email}`,e.appendNewElement(r,"span","score--span").textContent=`Score: ${t.score}`}))},new((r=void 0)||(r=Promise))((function(a,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,i)}c((n=n.apply(e,t||[])).next())}));var e,t,r,n}}(new y).createProject()}},n={};function a(e){var t=n[e];if(void 0!==t){if(void 0!==t.error)throw t.error;return t.exports}var s=n[e]={exports:{}};try{var o={id:e,module:s,factory:r[e],require:a};a.i.forEach((function(e){e(o)})),s=o.module,o.factory.call(s.exports,s,s.exports,o.require)}catch(e){throw s.error=e,e}return s.exports}a.m=r,a.c=n,a.i=[],a.hu=e=>e+"."+a.h()+".hot-update.js",a.hmrF=()=>"main."+a.h()+".hot-update.json",a.h=()=>"db27ab4173658b70aaa7",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="match-match-game:",a.l=(r,n,s,o)=>{if(e[r])e[r].push(n);else{var i,c;if(void 0!==s)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+s){i=u;break}}i||(c=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+s),i.src=r),e[r]=[n];var p=(t,n)=>{i.onerror=i.onload=null,clearTimeout(m);var a=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(n))),t)return t(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),c&&document.head.appendChild(i)}},(()=>{var e,t,r,n,s={},o=a.c,i=[],c=[],l="idle";function d(e){l=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}function u(e){if(0===t.length)return e();var r=t;return t=[],Promise.all(r).then((function(){return u(e)}))}function p(e){if("idle"!==l)throw new Error("check() is only allowed in idle status");return d("check"),a.hmrM().then((function(n){if(!n)return d(f()?"ready":"idle"),null;d("prepare");var s=[];return t=[],r=[],Promise.all(Object.keys(a.hmrC).reduce((function(e,t){return a.hmrC[t](n.c,n.r,n.m,e,r,s),e}),[])).then((function(){return u((function(){return e?h(e):(d("ready"),s)}))}))}))}function m(e){return"ready"!==l?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status")})):h(e)}function h(e){e=e||{},f();var t=r.map((function(t){return t(e)}));r=void 0;var a,s=t.map((function(e){return e.error})).filter(Boolean);if(s.length>0)return d("abort"),Promise.resolve().then((function(){throw s[0]}));d("dispose"),t.forEach((function(e){e.dispose&&e.dispose()})),d("apply");var o=function(e){a||(a=e)},i=[];return t.forEach((function(e){if(e.apply){var t=e.apply(o);if(t)for(var r=0;r<t.length;r++)i.push(t[r])}})),a?(d("fail"),Promise.resolve().then((function(){throw a}))):n?h(e).then((function(e){return i.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e})):(d("idle"),Promise.resolve(i))}function f(){if(n)return r||(r=[]),Object.keys(a.hmrI).forEach((function(e){n.forEach((function(t){a.hmrI[e](t,r)}))})),n=void 0,!0}a.hmrD=s,a.i.push((function(h){var f,g,v,w,y=h.module,b=function(r,n){var a=o[n];if(!a)return r;var s=function(t){if(a.hot.active){if(o[t]){var s=o[t].parents;-1===s.indexOf(n)&&s.push(n)}else i=[n],e=t;-1===a.children.indexOf(t)&&a.children.push(t)}else console.warn("[HMR] unexpected require("+t+") from disposed module "+n),i=[];return r(t)},c=function(e){return{configurable:!0,enumerable:!0,get:function(){return r[e]},set:function(t){r[e]=t}}};for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&"e"!==p&&Object.defineProperty(s,p,c(p));return s.e=function(e){return function(e){switch(l){case"ready":return d("prepare"),t.push(e),u((function(){d("ready")})),e;case"prepare":return t.push(e),e;default:return e}}(r.e(e))},s}(h.require,h.id);y.hot=(f=h.id,g=y,w={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:v=e!==f,_requireSelf:function(){i=g.parents.slice(),e=v?void 0:f,a(f)},active:!0,accept:function(e,t,r){if(void 0===e)w._selfAccepted=!0;else if("function"==typeof e)w._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var n=0;n<e.length;n++)w._acceptedDependencies[e[n]]=t||function(){},w._acceptedErrorHandlers[e[n]]=r;else w._acceptedDependencies[e]=t||function(){},w._acceptedErrorHandlers[e]=r},decline:function(e){if(void 0===e)w._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)w._declinedDependencies[e[t]]=!0;else w._declinedDependencies[e]=!0},dispose:function(e){w._disposeHandlers.push(e)},addDisposeHandler:function(e){w._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=w._disposeHandlers.indexOf(e);t>=0&&w._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,l){case"idle":r=[],Object.keys(a.hmrI).forEach((function(e){a.hmrI[e](f,r)})),d("ready");break;case"ready":Object.keys(a.hmrI).forEach((function(e){a.hmrI[e](f,r)}));break;case"prepare":case"check":case"dispose":case"apply":(n=n||[]).push(f)}},check:p,apply:m,status:function(e){if(!e)return l;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);t>=0&&c.splice(t,1)},data:s[f]},e=void 0,w),y.parents=i,y.children=[],i=[],h.require=b})),a.hmrC={},a.hmrI={}})(),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e,t,r,n,s={179:0},o={};function i(e){return new Promise(((t,r)=>{o[e]=t;var n=a.p+a.hu(e),s=new Error;a.l(n,(t=>{if(o[e]){o[e]=void 0;var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;s.message="Loading hot update chunk "+e+" failed.\n("+n+": "+a+")",s.name="ChunkLoadError",s.type=n,s.request=a,r(s)}}))}))}function c(o){function i(e){for(var t=[e],r={},n=t.map((function(e){return{chain:[e],id:e}}));n.length>0;){var s=n.pop(),o=s.id,i=s.chain,l=a.c[o];if(l&&(!l.hot._selfAccepted||l.hot._selfInvalidated)){if(l.hot._selfDeclined)return{type:"self-declined",chain:i,moduleId:o};if(l.hot._main)return{type:"unaccepted",chain:i,moduleId:o};for(var d=0;d<l.parents.length;d++){var u=l.parents[d],p=a.c[u];if(p){if(p.hot._declinedDependencies[o])return{type:"declined",chain:i.concat([u]),moduleId:o,parentId:u};-1===t.indexOf(u)&&(p.hot._acceptedDependencies[o]?(r[u]||(r[u]=[]),c(r[u],[o])):(delete r[u],t.push(u),n.push({chain:i.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:r}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];-1===e.indexOf(n)&&e.push(n)}}a.f&&delete a.f.jsonpHmr,e=void 0;var l={},d=[],u={},p=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var m in t)if(a.o(t,m)){var h,f=t[m],g=!1,v=!1,w=!1,y="";switch((h=f?i(m):{type:"disposed",moduleId:m}).chain&&(y="\nUpdate propagation: "+h.chain.join(" -> ")),h.type){case"self-declined":o.onDeclined&&o.onDeclined(h),o.ignoreDeclined||(g=new Error("Aborted because of self decline: "+h.moduleId+y));break;case"declined":o.onDeclined&&o.onDeclined(h),o.ignoreDeclined||(g=new Error("Aborted because of declined dependency: "+h.moduleId+" in "+h.parentId+y));break;case"unaccepted":o.onUnaccepted&&o.onUnaccepted(h),o.ignoreUnaccepted||(g=new Error("Aborted because "+m+" is not accepted"+y));break;case"accepted":o.onAccepted&&o.onAccepted(h),v=!0;break;case"disposed":o.onDisposed&&o.onDisposed(h),w=!0;break;default:throw new Error("Unexception type "+h.type)}if(g)return{error:g};if(v)for(m in u[m]=f,c(d,h.outdatedModules),h.outdatedDependencies)a.o(h.outdatedDependencies,m)&&(l[m]||(l[m]=[]),c(l[m],h.outdatedDependencies[m]));w&&(c(d,[h.moduleId]),u[m]=p)}t=void 0;for(var b,E=[],N=0;N<d.length;N++){var x=d[N],S=a.c[x];S&&(S.hot._selfAccepted||S.hot._main)&&u[x]!==p&&!S.hot._selfInvalidated&&E.push({module:x,require:S.hot._requireSelf,errorHandler:S.hot._selfAccepted})}return{dispose:function(){var e;r.forEach((function(e){delete s[e]})),r=void 0;for(var t,n=d.slice();n.length>0;){var o=n.pop(),i=a.c[o];if(i){var c={},u=i.hot._disposeHandlers;for(N=0;N<u.length;N++)u[N].call(null,c);for(a.hmrD[o]=c,i.hot.active=!1,delete a.c[o],delete l[o],N=0;N<i.children.length;N++){var p=a.c[i.children[N]];p&&(e=p.parents.indexOf(o))>=0&&p.parents.splice(e,1)}}}for(var m in l)if(a.o(l,m)&&(i=a.c[m]))for(b=l[m],N=0;N<b.length;N++)t=b[N],(e=i.children.indexOf(t))>=0&&i.children.splice(e,1)},apply:function(e){for(var t in u)a.o(u,t)&&(a.m[t]=u[t]);for(var r=0;r<n.length;r++)n[r](a);for(var s in l)if(a.o(l,s)){var i=a.c[s];if(i){b=l[s];for(var c=[],p=[],m=[],h=0;h<b.length;h++){var f=b[h],g=i.hot._acceptedDependencies[f],v=i.hot._acceptedErrorHandlers[f];if(g){if(-1!==c.indexOf(g))continue;c.push(g),p.push(v),m.push(f)}}for(var w=0;w<c.length;w++)try{c[w].call(null,b)}catch(t){if("function"==typeof p[w])try{p[w](t,{moduleId:s,dependencyId:m[w]})}catch(r){o.onErrored&&o.onErrored({type:"accept-error-handler-errored",moduleId:s,dependencyId:m[w],error:r,originalError:t}),o.ignoreErrored||(e(r),e(t))}else o.onErrored&&o.onErrored({type:"accept-errored",moduleId:s,dependencyId:m[w],error:t}),o.ignoreErrored||e(t)}}}for(var y=0;y<E.length;y++){var N=E[y],x=N.module;try{N.require(x)}catch(t){if("function"==typeof N.errorHandler)try{N.errorHandler(t,{moduleId:x,module:a.c[x]})}catch(r){o.onErrored&&o.onErrored({type:"self-accept-error-handler-errored",moduleId:x,error:r,originalError:t}),o.ignoreErrored||(e(r),e(t))}else o.onErrored&&o.onErrored({type:"self-accept-errored",moduleId:x,error:t}),o.ignoreErrored||e(t)}}return d}}}self.webpackHotUpdatematch_match_game=(e,r,s)=>{for(var i in r)a.o(r,i)&&(t[i]=r[i]);s&&n.push(s),o[e]&&(o[e](),o[e]=void 0)},a.hmrI.jsonp=function(e,s){t||(t={},n=[],r=[],s.push(c)),a.o(t,e)||(t[e]=a.m[e])},a.hmrC.jsonp=function(o,l,d,u,p,m){p.push(c),e={},r=l,t=d.reduce((function(e,t){return e[t]=!1,e}),{}),n=[],o.forEach((function(t){a.o(s,t)&&void 0!==s[t]&&(u.push(i(t)),e[t]=!0)})),a.f&&(a.f.jsonpHmr=function(t,r){e&&!a.o(e,t)&&a.o(s,t)&&void 0!==s[t]&&(r.push(i(t)),e[t]=!0)})},a.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(a.p+a.hmrF()).then((e=>{if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))}})(),a(400)})();